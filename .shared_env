#!/bin/sh
#
# Adam's shared environment startup file
#
# $Id$
#
# This should get run as part of setting up the environment
# of any sh-compatible shell, including non-interactive ones;
# hence it should be kept as fast and as portable as possible.

# {{{ HOME

# Don't leave history files in /
: ${HOME:=/root}

# }}}
# {{{ PATH

# Don't trust system-wide PATH?  Remember what it was, for reference.
syspath=$HOME/.syspath
[ -e $syspath ] || echo "$PATH" > $syspath
PATH=/usr/local/bin:/usr/X11R6/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin

# ... or *do* trust system-wide PATH
#PATH=/usr/local/bin:/usr/X11R6/bin:/usr/local/sbin:/usr/sbin:/sbin:$PATH

# Note order gets reversed
for newpath in                                        \
               ~/local/bin                            \
               ~/local/$OSTYPE/bin                    \
               ~/bin/{shortcuts,awk,palm,backgrounds} \
               ~/bin                                  \
; do
  [ -d $newpath ] && PATH=$newpath:$PATH
done

# }}}
# {{{ MANPATH

# In order to avoid forks here, this is done in .zshrc

# }}}
# {{{ grep

export GREP_OPTIONS='--directories=skip'

# }}}
# {{{ GNU screen

case "$TERM" in
  screen*) IN_SCREEN=yes ; export IN_SCREEN ;;
esac

if [ -e $ZDOTDIR/.screenrc ] && [ ! -e $HOME/.screenrc ]; then
  export SCREENRC=$ZDOTDIR/.screenrc
fi

# }}}
# {{{ INPUTRC

# no crappy RedHat inputrcs, thankyouverymuch.  Which fucking *idiot*
# set convert-meta to off?
[ -n "$INPUTRC" ] && unset INPUTRC

# }}}
# {{{ COLUMNS

# Some programs might find this handy.  Shouldn't do any harm.

export COLUMNS

# }}}
# {{{ LD_PRELOAD

# Fix obscure gtk problem
#LD_PRELOAD=/usr/lib/libgdk.so:/usr/lib/libgtk.so

# }}}
# {{{ OSTYPE

export OSTYPE

# }}}
# {{{ IRC

export IRCNAME='Adam Spiers'
export IRCNICK='tigerpig'
#export IRCNICK='Adam'

# }}}
# {{{ Editor

# Not sure which of these is right.
#export EDITOR=emacs
export EDITOR=fe

export VISUAL=fe

# }}}
# {{{ WWW home

export WWW_HOME='http://adamspiers.org/'

# }}}
# {{{ Pager

export METAMAIL_PAGER='less -r'
export PERLDOC_PAGER='less -r'
export PAGER='less'
export LESS='-h100 -i -j1 -M -q -y100'
#export LESSOPEN='|/usr/local/bin/lesspipe.sh %s'
#export LESSCLOSE='/usr/local/bin/lessclose.sh %s %s'

# }}}
# {{{ Name and Reply_To

export NAME='Adam Spiers'
export REPLYTO='adam@spiers.net (Adam Spiers)'

# }}}
# {{{ POSIXLY_CORRECT for patch

#export POSIXLY_CORRECT=yes

# }}}
# {{{ Palm Pilot

export PILOTRATE=115200
export PILOTPORT=/dev/pilot

# }}}
# {{{ rsync uses ssh

export RSYNC_RSH=ssh

# }}}
# {{{ cvs uses ssh

export CVS_RSH=ssh

# }}}

# {{{ Specific to local setups

: ${HOST:=${HOSTNAME:-`hostname`}}
: ${HOSTNAME:=$HOST}
export HOST HOSTNAME

. ${ZDOTDIR:-$HOME}/.zsh/functions/run_local_hooks .shared_env

# }}}

