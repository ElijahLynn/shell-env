#!/usr/bin/expect -f 

eval spawn -noecho $argv
expect {
    -timeout 20
    -re "Password for .*: " {
        stty -echo
        interact {
            "\r" {
                send "\n"
                return
            }
        }
        exp_continue
    }
    "root]#" {
        send "/home/aspiers/bin/zsh\n"
        interact
    }

    # Match prompts here
    {\$} interact
    -re "#" interact

    timeout interact
    eof
}
