#!/bin/sh

found=
for file in "$@"; do
    if [ -r "$file" ]; then
        found=y
    else
        echo "$file doesn't exist or unreadable!" >&2
    fi
done

if [ -z "$found" ]; then
  echo "No valid file found; aborting!" >&2
  exit 1
fi

# acroread -help gets truncated before echoing 'openInNewWindow'
# when STDOUT is not a tty?!

# if acroread -helpall | grep -q openInNewWindow; then
  acro_opts=-openInNewWindow
# else
#   acro_opts=
# fi

acroread $acro_opts "$@" || kpdf "$@" || xpdf "$@"
