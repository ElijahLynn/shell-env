#autoload

local num title

# Don't output anything if STDOUT isn't a tty
[[ -t 1 ]] || return 1

type="$1"
shift
title="$1"

case "$type" in
  window) num=2
      ;;
    icon) num=1
      ;;
  screen) echo -n "\ek$title\e\\"
          return
      ;;
       *) print "Usage: set_title ( window | icon | screen ) <title>"
      return 1 
      ;;
esac

# Other checks will need to be added here.  Could switch on output of tty(1).
if [[ "$TERM" == 'linux' ]]; then
#  print "Cannot currently display '$1' title; only remembering value set."
else
  # note screen will swallow this
  echo -n "\e]$num;$title\a"
fi

